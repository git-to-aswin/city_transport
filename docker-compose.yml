services:
   postgres:
      image: postgres:16
      container_name: railpay_postgres
      environment:
         POSTGRES_USER: postgres
         POSTGRES_PASSWORD: postgres
         POSTGRES_DB: railpay_local
      ports:
         - "5432:5432"
      volumes:
         - railpay_pgdata:/var/lib/postgresql/data
         - ./db/init:/docker-entrypoint-initdb.d
      healthcheck:
         test: ["CMD-SHELL", "pg_isready -U postgres -d railpay_local"]
         interval: 5s
         timeout: 3s
         retries: 20

volumes:
   railpay_pgdata:
